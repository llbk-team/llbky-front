<template>
  <div class="insight-page">
    <!-- í—¤ë” -->
    <div class="header">
      <div class="title-section">
        <h2>AI ì¶”ì²œ ì¸ì‚¬ì´íŠ¸</h2>
        <p>ë‰´ìŠ¤Â·íŠ¸ë Œë“œì™€ ì €ì¥í•œ í‚¤ì›Œë“œë¥¼ ë¶„ì„í•´ ì œì•ˆí•˜ëŠ” ë§ì¶¤ ì§ë¬´ ì¸ì‚¬ì´íŠ¸</p>
      </div>
      <router-link to="/trend/saved" class="saved-btn">
        ğŸ“‘ ë‚´ í‚¤ì›Œë“œ ë³´ê¸° ({{ savedCount }})
      </router-link>
    </div>

    <!-- ë¶„ì„ ì™„ë£Œ ì•ˆë‚´ -->
    <div class="notice-box">
      <p>
        âœ… <strong>ë¶„ì„ ì™„ë£Œ</strong><br />
        ìµœê·¼ ë‰´ìŠ¤ ìš”ì•½, íŠ¸ë Œë“œ ë°ì´í„°, ê·¸ë¦¬ê³  ì‚¬ìš©ìì˜ <strong>ì €ì¥ í‚¤ì›Œë“œ</strong>ë¥¼ í•¨ê»˜ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.<br />
        ì•„ë˜ì˜ ê²°ê³¼ëŠ” AIê°€ <strong>í¬ë§ ì§ë¬´</strong>ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ <strong>ì—°ê´€ ì§ë¬´ì™€ ê¸°ìˆ  íë¦„</strong>ê¹Œì§€ í™•ì¥ ë¶„ì„í•œ ì¸ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.
      </p>
    </div>

    <!-- ğŸ“Š ë‘ ê°œì˜ ê°€ë¡œ ë°•ìŠ¤ (ì´ìœ  + ê³ ë„í™”) -->
    <div class="dual-info-box">
      <!-- ì™¼ìª½: ì™œ ë‹¤ë¥¸ ì§ë¬´ë„ í•¨ê»˜ ë³´ì´ë‚˜ìš” -->
      <div class="context-box">
        <p>
          â„¹ï¸ <strong>ì™œ ë‹¤ë¥¸ ì§ë¬´ë„ í•¨ê»˜ ë³´ì´ë‚˜ìš”?</strong><br />
          íšŒì›ê°€ì… ì‹œ ì„ íƒí•œ í¬ë§ ì§ë¬´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ, AIê°€ ê´€ë ¨ ì‚°ì—…ì˜ ë‰´ìŠ¤ì™€ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ì¢…í•© ë¶„ì„í•˜ì—¬<br />
          <strong>ì¸ì ‘ ì§ë¬´</strong>ë‚˜ <strong>ì „í™˜ ê°€ëŠ¥ì„±ì´ ë†’ì€ ë¶„ì•¼</strong>ë„ í•¨ê»˜ ì œì•ˆí•©ë‹ˆë‹¤.<br />
          ì´ëŠ” ì»¤ë¦¬ì–´ í™•ì¥ ê°€ëŠ¥ì„±ê³¼ í•™ìŠµ ë°©í–¥ì„±ì„ ë•ê¸° ìœ„í•œ ì¶”ì²œì…ë‹ˆë‹¤.
        </p>
      </div>

      <!-- ì˜¤ë¥¸ìª½: ë§ì¶¤ ë¶„ì„ ê³ ë„í™” -->
      <div class="personal-context-box">
        <p>
          ğŸ§  <strong>ë§ì¶¤ ë¶„ì„ ê³ ë„í™”</strong><br />
          AIëŠ” ì‚¬ìš©ìì˜ <strong>ì´ë ¥ì„œ</strong>Â·<strong>ë©´ì ‘ í”¼ë“œë°±</strong>Â·<strong>í•™ìŠµ ë‚´ì—­</strong>ì„ í•¨ê»˜ ë¶„ì„í•˜ì—¬ 
          í˜„ì¬ ì—­ëŸ‰ê³¼ ì‹œì¥ ìˆ˜ìš” ê°„ì˜ <strong>ê¸°ìˆ  ê²©ì°¨(Skill Gap)</strong>ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.<br />
          ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ <strong>ë³´ì™„ì´ í•„ìš”í•œ ê¸°ìˆ </strong>ê³¼ 
          <strong>ì„±ì¥ ë°©í–¥</strong>ì„ í•¨ê»˜ ì œì•ˆí•©ë‹ˆë‹¤.
        </p>
      </div>
    </div>

    <!-- ğŸ¤– AI ì¶”ì²œ ì¸ì‚¬ì´íŠ¸ -->
    <div class="recommend-section">
      <h3>ğŸ¤– AI ì¶”ì²œ ì¸ì‚¬ì´íŠ¸</h3>
      <p class="sub-desc">
        ìµœê·¼ ë‰´ìŠ¤Â·íŠ¸ë Œë“œ ë¶„ì„ê³¼ ì €ì¥ëœ í‚¤ì›Œë“œë¥¼ ë°”íƒ•ìœ¼ë¡œ 
        AIê°€ ì œì•ˆí•˜ëŠ” ì—°ê´€ ì§ë¬´ì™€ í•µì‹¬ ê¸°ìˆ  í‚¤ì›Œë“œì…ë‹ˆë‹¤.
      </p>

      <div class="recommend-grid">
        <div v-for="(job, i) in jobs" :key="i" class="recommend-card">
          <h4>{{ job.title }}</h4>
          <p class="summary">{{ job.summary }}</p>

          <div class="trend-box">
            <h5>ğŸ“ˆ íŠ¸ë Œë“œ ìš”ì•½</h5>
            <p>{{ job.trendSummary }}</p>
          </div>

          <div class="keyword-box">
            <h5>ğŸ’¡ ê´€ë ¨ í‚¤ì›Œë“œ</h5>
            <div class="tags">
              <button
                v-for="tag in job.tags"
                :key="tag"
                class="tag-btn"
                @click="saveKeyword(tag)"
              >
                {{ tag }}
              </button>
            </div>
          </div>

          <p class="note">
            ğŸ” * ì´ ì¸ì‚¬ì´íŠ¸ëŠ” í¬ë§ ì§ë¬´ ë° AI ë¶„ì„ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </div>

    <!-- ğŸ’¼ í¬ë§ ì§ë¬´ ì¤‘ì‹¬ ì„±ì¥ ì œì•ˆ -->
    <div class="career-analysis-box">
      <p>
        ğŸ’¼ <strong>í¬ë§ ì§ë¬´ ì¤‘ì‹¬ ì„±ì¥ ì œì•ˆ</strong><br />
        AIê°€ ì‚¬ìš©ìì˜ <strong>í¬ë§ ì§ë¬´</strong>ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ìµœê·¼ íŠ¸ë Œë“œì™€ 
        ì´ë ¥ì„œÂ·ë©´ì ‘Â·í•™ìŠµ ë°ì´í„°ë¥¼ í•¨ê»˜ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.<br />
        ì•„ë˜ëŠ” ì‹œì¥ íë¦„ê³¼ í˜„ì¬ ì—­ëŸ‰ì„ ë°”íƒ•ìœ¼ë¡œ ì œì•ˆí•˜ëŠ” ì„±ì¥ ë°©í–¥ì…ë‹ˆë‹¤.
      </p>

      <ul class="feedback-list">
        <li>
          <strong>ğŸ“„ ì´ë ¥ì„œ ë¶„ì„:</strong> ìµœê·¼ ì—…ê³„ì—ì„œëŠ” 
          <b>MLOps</b>ì™€ <b>LLM ì‘ìš©</b>ì´ í•µì‹¬ í‚¤ì›Œë“œë¡œ ë¶€ìƒí–ˆìŠµë‹ˆë‹¤. 
          í˜„ì¬ ì´ë ¥ì„œì—ëŠ” ê´€ë ¨ í”„ë¡œì íŠ¸ ê²½í—˜ì´ ì ê²Œ ë‚˜íƒ€ë‚˜ë¯€ë¡œ 
          ëª¨ë¸ ë°°í¬ ë° ìš´ì˜ ê²½í—˜ì„ ë³´ì™„í•´ë³´ì„¸ìš”.
        </li>
        <li>
          <strong>ğŸ¤ ë©´ì ‘ ë¶„ì„:</strong> ë‹µë³€ì—ì„œ í”„ë¡œì íŠ¸ ì„±ê³¼ë‚˜ ìˆ˜ì¹˜ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì œì‹œí•˜ì§€ ì•Šì€ ê²½ìš°ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. 
          <b>ì •ëŸ‰ì  ê²°ê³¼ ì¤‘ì‹¬ì˜ ìŠ¤í† ë¦¬í…”ë§</b>ì„ ì¶”ê°€í•˜ë©´ ì „ë¬¸ì„±ì´ ê°•í™”ë©ë‹ˆë‹¤.
        </li>
        <li>
          <strong>ğŸ“š í•™ìŠµ ë°ì´í„° ë¶„ì„:</strong> í˜„ì¬ í•™ìŠµ ë‚´ì—­ì€ Python ì¤‘ì‹¬ì…ë‹ˆë‹¤. 
          ìµœê·¼ íŠ¸ë Œë“œì— ë§ì¶° <b>ë°ì´í„° ê±°ë²„ë„ŒìŠ¤</b>ë‚˜ <b>LLM íŒŒì¸íŠœë‹</b> ê³¼ì •ì„ í•¨ê»˜ ì§„í–‰í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.
        </li>
      </ul>
    </div>

    <div class="hint-box">
      ğŸ’¾ í´ë¦­í•œ í‚¤ì›Œë“œëŠ” <strong>ë‚´ í‚¤ì›Œë“œ</strong> í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";

const savedCount = ref(0);

// ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ í¬ë§ ì§ë¬´ ê°€ì ¸ì˜¤ê¸°
const userJob = ref(localStorage.getItem("user_job") || "AI ì—”ì§€ë‹ˆì–´");

onMounted(() => {
  const saved = JSON.parse(localStorage.getItem("user_keywords") || "[]");
  savedCount.value = saved.length;
});

// ì²« ë²ˆì§¸ ì¹´ë“œ = í¬ë§ ì§ë¬´
const jobs = ref([
  {
    title: userJob.value,
    summary: `${userJob.value} ì§ë¬´ëŠ” ìµœê·¼ ì‚°ì—… íŠ¸ë Œë“œì—ì„œ í•µì‹¬ ì„±ì¥ ë¶„ì•¼ë¡œ ë¶„ì„ë˜ì—ˆìŠµë‹ˆë‹¤. 
    ë°ì´í„° ê¸°ë°˜ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ê³¼ ëª¨ë¸ ìš´ì˜(MLOps) ì—­ëŸ‰ì´ ì¤‘ìš”í•˜ê²Œ í‰ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤.`,
    trendSummary: `ìµœê·¼ ${userJob.value} ê´€ë ¨ í‚¤ì›Œë“œë¡œëŠ” LLM, ëª¨ë¸ ìµœì í™”, Python ìë™í™”ê°€ ê°€ì¥ ë§ì´ ì–¸ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. 
    ì‚°ì—… ì „ë°˜ì—ì„œ ${userJob.value} ìˆ˜ìš”ê°€ ë¹ ë¥´ê²Œ í™•ì‚° ì¤‘ì…ë‹ˆë‹¤.`,
    tags: ["MLOps", "LLM", "Python", "AI Automation"],
  },
  {
    title: "í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´",
    summary:
      "ê¸°ì—…ì˜ í´ë¼ìš°ë“œ ì „í™˜ ì†ë„ê°€ ë¹¨ë¼ì§€ë©° AWS, Docker, Kubernetes ê´€ë ¨ ê¸°ìˆ  ìˆ˜ìš”ê°€ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
    trendSummary:
      "DevOps ìë™í™”ì™€ ì»¨í…Œì´ë„ˆ ë³´ì•ˆì´ ì£¼ìš” í‚¤ì›Œë“œë¡œ ë¶€ìƒí–ˆìŠµë‹ˆë‹¤.",
    tags: ["AWS", "Kubernetes", "DevOps", "Docker"],
  },
  {
    title: "ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸",
    summary:
      "ë°ì´í„° ê¸°ë°˜ ì˜ˆì¸¡ê³¼ ìƒì„±í˜• AIì˜ ìœµí•©ì´ í™œë°œíˆ ì§„í–‰ë˜ê³  ìˆìœ¼ë©°, SQLê³¼ ë¨¸ì‹ ëŸ¬ë‹ ì—­ëŸ‰ì´ í•µì‹¬ìœ¼ë¡œ ê¼½í™ë‹ˆë‹¤.",
    trendSummary:
      "Pandas, SQL, ë¨¸ì‹ ëŸ¬ë‹ ê¸°ìˆ ì´ ì—¬ì „íˆ ë†’ì€ ê²€ìƒ‰ëŸ‰ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
    tags: ["SQL", "Pandas", "Machine Learning", "Visualization"],
  },
]);

const saveKeyword = (tag) => {
  const saved = JSON.parse(localStorage.getItem("user_keywords") || "[]");
  if (!saved.includes(tag)) {
    saved.push(tag);
    localStorage.setItem("user_keywords", JSON.stringify(saved));
    savedCount.value = saved.length;
    alert(`'${tag}' í‚¤ì›Œë“œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤ âœ…`);
  } else {
    alert(`ì´ë¯¸ ì €ì¥ëœ í‚¤ì›Œë“œì…ë‹ˆë‹¤.`);
  }
};
</script>

<style scoped>
.insight-page {
  background: #f9faf9;
  padding: 40px 60px 60px 60px;
  color: #111;
  font-family: "NexonLv1Gothic", sans-serif;
  max-width: 1300px;
  margin: 0 auto;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 28px;
}
.title-section h2 {
  font-size: 24px;
  font-weight: 700;
}
.title-section p {
  font-size: 14px;
  color: #555;
  margin-top: 4px;
}
.saved-btn {
  background: #00c896;
  color: #fff;
  font-weight: 600;
  font-size: 13px;
  padding: 8px 16px;
  border-radius: 8px;
  text-decoration: none;
  transition: 0.2s;
}
.saved-btn:hover {
  background: #00b487;
}

/* Notice */
.notice-box {
  background: #e9f8f2;
  border: 1px solid #a2f1d6;
  border-radius: 12px;
  padding: 18px 22px;
  font-size: 14px;
  margin-bottom: 20px;
}

/* Dual Info Section */
.dual-info-box {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 30px;
}
.context-box,
.personal-context-box {
  border-radius: 10px;
  padding: 16px 20px;
  font-size: 13px;
  line-height: 1.6;
}
.context-box {
  background: #fff8ea;
  border: 1px solid #ffe19d;
  color: #444;
}
.context-box strong {
  color: #b25c00;
}
.personal-context-box {
  background: #eef7ff;
  border: 1px solid #c9e3ff;
  color: #333;
}
.personal-context-box strong {
  color: #0059b3;
}

/* Recommend Section */
.recommend-section h3 {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 6px;
}
.sub-desc {
  font-size: 13px;
  color: #555;
  margin-bottom: 20px;
}
.recommend-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 24px;
}
.recommend-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  border: 1px solid #eee;
  padding: 24px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: 0.2s;
}
.recommend-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
}
.summary {
  font-size: 13px;
  color: #444;
  line-height: 1.6;
  margin-bottom: 14px;
}
.trend-box,
.keyword-box {
  background: #f7fcfa;
  border: 1px solid #a2f1d6;
  border-radius: 10px;
  padding: 12px 16px;
  margin-bottom: 12px;
}
.trend-box h5,
.keyword-box h5 {
  font-size: 13px;
  font-weight: 700;
  color: #00b487;
  margin-bottom: 6px;
}
.tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.tag-btn {
  border: 1px solid #a2f1d6;
  background: #ddf3eb;
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 12px;
  cursor: pointer;
  transition: 0.2s;
}
.tag-btn:hover {
  background: #a2f1d6;
  transform: scale(1.05);
}
.note {
  font-size: 12px;
  color: #777;
  margin-top: 8px;
}

/* Career Analysis Section */
.career-analysis-box {
  background: #f1f6ff;
  border: 1px solid #c7dafd;
  border-radius: 10px;
  padding: 20px;
  margin-top: 36px;
  font-size: 13px;
  color: #333;
  line-height: 1.6;
}
.career-analysis-box strong {
  color: #0040a8;
}
.feedback-list {
  margin-top: 10px;
  list-style: none;
  padding-left: 0;
}
.feedback-list li {
  background: #fff;
  border: 1px solid #dbe7ff;
  border-radius: 8px;
  padding: 10px 12px;
  margin-bottom: 8px;
  font-size: 13px;
}
.feedback-list b {
  color: #0069ff;
}

/* Hint */
.hint-box {
  background: #e9f8f2;
  border: 1px solid #a2f1d6;
  border-radius: 10px;
  padding: 10px 16px;
  font-size: 13px;
  margin-top: 28px;
  text-align: center;
}
</style>
